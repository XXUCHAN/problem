(()=>{"use strict";var t={785:t=>{t.exports=require("readline")}},n={};function e(s){var o=n[s];if(void 0!==o)return o.exports;var i=n[s]={exports:{}};return t[s](i,i.exports,e),i.exports}const s=require("perf_hooks");function o(){return t=this,n=void 0,o=function*(){const t=e(785).createInterface({input:process.stdin,output:process.stdout});return new Promise(n=>{t.on("line",e=>{n(e.split(" ")),t.close()})})},new((s=void 0)||(s=Promise))(function(e,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function r(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s(function(t){t(n)})).then(a,r)}c((o=o.apply(t,n||[])).next())});var t,n,s,o}function i(t,n){return Math.floor(Math.random()*(n-t+1))+t}class a{constructor(t){this.mine=[],this.map=[],this.result_map=[],this.mine_count=t.max_mine,this.map_x=t.size_x,this.map_y=t.size_y,this.mine=function(t,n,e){const s=new Set,o=[];for(;s.size<e;){const e=i(0,t-1),a=i(0,n-1),r=`${e},${a}`;s.has(r)||(s.add(r),o.push({x:e,y:a}))}return o}(this.map_x,this.map_y,this.mine_count),this.level=t.level,this.flag_count=t.max_mine}initMap(){for(let t=0;t<this.map_y;t++){this.map[t]=[],this.result_map[t]=[];for(let n=0;n<this.map_x;n++)this.map[t][n]="#",this.result_map[t][n]="#"}for(const t of this.mine)this.result_map[t.y][t.x]="@";this.showMap()}travelArea(t,n){const e=new Array(this.map_y).fill(0).map(()=>new Array(this.map_x).fill(!1)),s=[];for(s.push({x:t,y:n}),e[n][t]=!0;s.length>0;){const{x:t,y:n}=s.shift();if("0"!==this.map[n][t])continue;const o=[-1,0,1],i=[-1,0,1];for(const a of o)for(const o of i){const i=t+a,r=n+o;if(i>=0&&i<this.map_x&&r>=0&&r<this.map_y&&!e[r][i]){e[r][i]=!0;const t=this.searchSquare(i,r);this.map[r][i]=t,s.push({x:i,y:r})}}}}searchSquare(t,n){const e=[-1,0,1],s=[-1,0,1];let o=0;for(const i of e)for(const e of s){const s=t+i,a=n+e;s>=0&&s<this.map_x&&a>=0&&a<this.map_y&&this.flagChecker(s,a)&&o++}return o.toString()}flagChecker(t,n){return"@"===this.result_map[n][t]}showMap(){console.clear(),console.log("남은 깃발 : ",this.flag_count),console.log("남은 지뢰 : ",this.mine_count),console.table(this.map),console.table(this.result_map)}insertInput(){return t=this,n=void 0,s=function*(){let t="";for(;;){0!==this.mine_count&&"FAIL"!==t||(0===this.mine_count&&console.log("SUCCESS"),t="END",this.showMap(),console.log("다시 시작하시겠습니까? (y/n) : "));const n=yield o();if("r"===n[0]||"y"===n[0]&&"END"===t){t="RESTART";break}if("q"===n[0]||"n"===n[0]&&"END"===t){t="INIT";break}if("f"===n[0]){const t=Number(n[1]),e=Number(n[2]);"f"===this.map[e][t]?(this.flag_count++,this.map[e][t]="#"):"#"===this.map[e][t]&&(this.map[e][t]="f",this.flag_count--,this.flagChecker(t,e)&&this.mine_count--),this.showMap()}else{const e=Number(n[0]),s=Number(n[1]);if(this.flagChecker(e,s))this.showMap(),console.table(this.result_map),t="FAIL";else if("f"!==this.map[s][e]){const t=this.searchSquare(e,s);"0"===t?(this.map[s][e]=t,this.travelArea(e,s),this.showMap()):(this.map[s][e]=t,this.showMap())}}}return t},new((e=void 0)||(e=Promise))(function(o,i){function a(t){try{c(s.next(t))}catch(t){i(t)}}function r(t){try{c(s.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(a,r)}c((s=s.apply(t,n||[])).next())});var t,n,e,s}}function r(t){const n="easy"===t[0]?9:"normal"===t[0]?16:30,e="easy"===t[0]?9:(t[0],16),s="easy"===t[0]?10:"normal"===t[0]?40:99;return{level:t[0],size_x:n,size_y:e,max_mine:s}}let c;!function(){var t,n,e,i;t=this,n=void 0,i=function*(){let t,n="";for(;;){if(console.log("Init START"),c=s.performance.now(),"RESTART"!==n){console.log("난이도를 선택하세요 (easy, normal, hard) : ");const n=yield o();if("easy"!==n[0]&&"normal"!==n[0]&&"hard"!==n[0]){console.log("잘못된 난이도입니다. 다시 입력해주세요.");continue}t=r(n)}if(!t)break;const e=new a(t);e.initMap(),n=yield e.insertInput()}},new((e=void 0)||(e=Promise))(function(s,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function r(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var n;t.done?s(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(a,r)}c((i=i.apply(t,n||[])).next())})}()})();